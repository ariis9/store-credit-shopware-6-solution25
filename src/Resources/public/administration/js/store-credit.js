!function(){var e={489:function(){},289:function(){},581:function(){},165:function(){let{Component:e}=Shopware,{mapState:t}=Shopware.Component.getComponentHelper();e.override("sw-order-detail",{data(){return{originalZipCode:null}},computed:{...t("swOrderDetail",["order"]),orderRepository(){return Shopware.Service("repositoryFactory").create("order")},orderTypePayment(){return this.order?.customFields?.orderTypePayment??"other"},isCreditCardOrder(){return"credit_card"===this.orderTypePayment},isDetailsTabActive(){return"sw.order.detail.details"===this.$route.name},shippingZipCode(){return this.order?.deliveries?.[0]?.shippingOrderAddress?.zipcode??null}},watch:{order:{handler(e){e&&!this.originalZipCode&&(this.originalZipCode=this.shippingZipCode)},deep:!0,immediate:!0}},methods:{async onSaveEdits(){if(this.isCreditCardOrder&&this.isDetailsTabActive){this.createNotificationError({message:this.$tc("Orders with payment type Credit Card cannot be edited.")});return}this.originalZipCode!==this.shippingZipCode&&(this.createNotificationWarning({message:this.$tc("Shipping ZIP code has been changed.")}),await this.setZipCodeChangedFlag()),this.$super("onSaveEdits")},async setZipCodeChangedFlag(){try{this.order.customFields||(this.order.customFields={}),this.order.customFields.zipCodeChanged=!0,await this.orderRepository.save([{id:this.order.id,customFields:this.order.customFields}],Shopware.Context.api),this.createNotificationSuccess({message:this.$tc("ZIP code change has been recorded.")})}catch(e){console.warn(e)}}}})},594:function(e,t,r){var s=r(489);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,r(534).A)("9054e48c",s,!0,{})},962:function(e,t,r){var s=r(289);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,r(534).A)("4c81d400",s,!0,{})},457:function(e,t,r){var s=r(581);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,r(534).A)("786a0b18",s,!0,{})},534:function(e,t,r){"use strict";function s(e,t){for(var r=[],s={},a=0;a<t.length;a++){var i=t[a],n=i[0],o={id:e+":"+a,css:i[1],media:i[2],sourceMap:i[3]};s[n]?s[n].parts.push(o):r.push(s[n]={id:n,parts:[o]})}return r}r.d(t,{A:function(){return f}});var a,i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var n={},o=i&&(document.head||document.getElementsByTagName("head")[0]),l=null,d=0,c=!1,u=function(){},m=null,h="data-vue-ssr-id",p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function f(e,t,r,a){c=r,m=a||{};var i=s(e,t);return C(i),function(t){for(var r=[],a=0;a<i.length;a++){var o=n[i[a].id];o.refs--,r.push(o)}t?C(i=s(e,t)):i=[];for(var a=0;a<r.length;a++){var o=r[a];if(0===o.refs){for(var l=0;l<o.parts.length;l++)o.parts[l]();delete n[o.id]}}}}function C(e){for(var t=0;t<e.length;t++){var r=e[t],s=n[r.id];if(s){s.refs++;for(var a=0;a<s.parts.length;a++)s.parts[a](r.parts[a]);for(;a<r.parts.length;a++)s.parts.push(w(r.parts[a]));s.parts.length>r.parts.length&&(s.parts.length=r.parts.length)}else{for(var i=[],a=0;a<r.parts.length;a++)i.push(w(r.parts[a]));n[r.id]={id:r.id,refs:1,parts:i}}}}function g(){var e=document.createElement("style");return e.type="text/css",o.appendChild(e),e}function w(e){var t,r,s=document.querySelector("style["+h+'~="'+e.id+'"]');if(s){if(c)return u;s.parentNode.removeChild(s)}if(p){var a=d++;t=b.bind(null,s=l||(l=g()),a,!1),r=b.bind(null,s,a,!0)}else t=v.bind(null,s=g()),r=function(){s.parentNode.removeChild(s)};return t(e),function(s){s?(s.css!==e.css||s.media!==e.media||s.sourceMap!==e.sourceMap)&&t(e=s):r()}}var y=(a=[],function(e,t){return a[e]=t,a.filter(Boolean).join("\n")});function b(e,t,r,s){var a=r?"":s.css;if(e.styleSheet)e.styleSheet.cssText=y(t,a);else{var i=document.createTextNode(a),n=e.childNodes;n[t]&&e.removeChild(n[t]),n.length?e.insertBefore(i,n[t]):e.appendChild(i)}}function v(e,t){var r=t.css,s=t.media,a=t.sourceMap;if(s&&e.setAttribute("media",s),m.ssrId&&e.setAttribute(h,t.id),a&&(r+="\n/*# sourceURL="+a.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}}},t={};function r(s){var a=t[s];if(void 0!==a)return a.exports;var i=t[s]={id:s,exports:{}};return e[s](i,i.exports,r),i.exports}r.d=function(e,t){for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="bundles/storecredit/",window?.__sw__?.assetPath&&(r.p=window.__sw__.assetPath+"/bundles/storecredit/"),function(){"use strict";r(962);let{Component:e}=Shopware,{Criteria:t}=Shopware.Data;e.register("sw-customer-grid",{template:'<template>\n  <div>\n    <sw-card title="Select Customer">\n      <sw-text-field \n        v-model:value="searchTerm" \n        placeholder="Search for customers..." \n        @input="onSearch"\n      />\n\n      <sw-data-grid\n              :dataSource="customerOptions"\n              :columns="columns"\n              :isLoading="isLoading"\n              :identifier="\'id\'"\n              :showSelection="true"\n              :selectedItems="selectedItems"\n              @selectItem="onSelectCustomer"\n      >\n\n      <template #column-name="{ item }">\n          {{ item.label }}\n        </template>\n        <template #column-customerNumber="{ item }">\n          {{ item.customerNumber }}\n        </template>\n        <template #column-email="{ item }">\n          {{ item.email }}\n        </template>\n      </sw-data-grid>\n\n       <sw-pagination\n          :total="totalCustomers"\n          :limit="limit"\n          :page="page"\n          @pageChange="onPageChange">\n       </sw-pagination>\n    </sw-card>\n  </div>\n</template>\n',inject:["repositoryFactory"],props:{value:{type:String,required:!1,default:null}},data(){return{selectedNewCustomer:this.value,customerOptions:[],isLoading:!1,searchTerm:"",totalCustomers:0,page:1,limit:10,columns:[{property:"label",label:"Name",allowResize:!0},{property:"customerNumber",label:"Customer Number",allowResize:!0},{property:"email",label:"Email",allowResize:!0}]}},watch:{value(e){this.selectedNewCustomer=e},selectedNewCustomer(e){this.$emit("update:value",e)},searchTerm:{handler(){this.fetchCustomers(!0)},immediate:!1}},created(){this.fetchCustomers()},computed:{selectedItems(){if(!this.selectedNewCustomer)return{};let e=this.customerOptions.find(e=>e.id===this.selectedNewCustomer);return e?{[e.id]:e}:{}}},methods:{async fetchCustomers(e=!1){new t().addSorting(t.sort("lastName","ASC")),e&&(this.page=1),this.isLoading=!0;try{let e=this.createCriteria(),t=await this.repositoryFactory.create("customer").search(e,Shopware.Context.api);this.customerOptions=t.map(e=>({id:e.id,label:`${e.firstName} ${e.lastName}`,customerNumber:e.customerNumber,email:e.email})),this.totalCustomers=t.total}catch(e){console.error("Error fetching customers:",e.response?.data||e)}finally{this.isLoading=!1}},onSearch(){this.fetchCustomers(!0)},onPageChange(e){if("object"==typeof e&&e.page&&(e=e.page),"number"!=typeof e||e<=0){console.error("Invalid page number:",e);return}this.page=parseInt(e,10),this.fetchCustomers()},onSelectCustomer(e){let t=Object.values(e)[0];t&&(this.selectedNewCustomer=t.id,this.$emit("update:value",t.id))},createCriteria(){let e=Number.isInteger(this.page)&&this.page>0?this.page:1,t=new Shopware.Data.Criteria(e,this.limit);return t.setLimit(this.limit),t.setPage(this.page),this.searchTerm&&this.searchTerm.trim().length>0&&t.addFilter(Shopware.Data.Criteria.multi("OR",[Shopware.Data.Criteria.contains("firstName",this.searchTerm),Shopware.Data.Criteria.contains("lastName",this.searchTerm),Shopware.Data.Criteria.contains("email",this.searchTerm),Shopware.Data.Criteria.contains("customerNumber",this.searchTerm)])),t}}});let{Component:s,Mixin:a}=Shopware,{Criteria:i}=Shopware.Data;s.register("store-credits-index",{template:'<template>\n    <sw-page>\n        <template #smart-bar-header>\n            <sw-page-title>Store Credits</sw-page-title>\n\n            <sw-button\n                    size="small"\n                    variant="primary"\n                    @click="openAddCustomerModal"\n                    class="sw-page__header-add-credit-button"\n            >\n                Add Customer Credit\n            </sw-button>\n        </template>\n\n        <template #content>\n            <sw-data-grid\n                    :dataSource="storeCredits"\n                    :columns="columns"\n                    :isLoading="isLoading"\n                    {# :useContext="false"  #}\n\n            >\n\n                <template #column-credits="{ item }">\n                    {{ formatCredits(item.credits) }}\n                </template>\n\n                <template #column-balance="{ item }">\n                    {{ formatCurrency(item.balance) }}\n                </template>\n\n\n                <template #column-actions="{ item }">\n                    <sw-button\n                            size="small"\n                            variant="success"\n                            @click="openAddBalanceModal(item)"\n                    >\n                        Add Credits\n                    </sw-button>\n                    <sw-button\n                            size="small"\n                            variant="danger"\n                            @click="openDeductBalanceModal(item)"\n                    >\n                        Deduct Credits\n                    </sw-button>\n                </template>\n\n\n                {# <template #column-history="{ item }">\n                    <sw-context-button>\n                        <sw-context-menu-item\n                                @click="navigateToCustomerHistory(item.storeCreditId, item.customerFullName, item.balance)"\n                        >\n                            View History\n                        </sw-context-menu-item>\n                        <sw-context-menu-item\n                                @click="openDeleteModal(item)"\n                                icon="regular-trash"\n                                variant="danger"\n                        >\n                            Delete\n                        </sw-context-menu-item>\n                    </sw-context-button>\n                </template> #}\n                <template #actions="{ item }">\n                    <sw-context-menu-item\n                        @click="navigateToCustomerHistory(item.storeCreditId, item.customerFullName, item.balance)"\n                    >\n                        View History\n                    </sw-context-menu-item>\n                    <sw-context-menu-item\n                        @click="openDeleteModal(item)"\n                        icon="regular-trash"\n                        variant="danger"\n                    >\n                        Delete\n                    </sw-context-menu-item>\n            </template>\n            </sw-data-grid>\n\n            <sw-modal\n                    v-if="addBalanceModalVisible"\n                    title="Add Credits"\n                    @modal-close="addBalanceModalVisible = false"\n            >\n                <sw-number-field\n                        v-model:value="amount"\n                        label="Credits"\n                        :min="0.00"\n                        :step="0.00"\n                        :number-type="\'float\'"\n                        placeholder="Enter credits"></sw-number-field>\n                <sw-text-field v-model:value="reason" label="Reason" />\n                <sw-button @click="addBalance" size="small" variant="primary">\n                    Submit\n                </sw-button>\n                <sw-button\n                        @click="addBalanceModalVisible = false"\n                        size="small"\n                        variant="danger"\n                >\n                    Cancel\n                </sw-button>\n            </sw-modal>\n\n            <sw-modal\n                    v-if="deductBalanceModalVisible"\n                    title="Deduct Balance"\n                    @modal-close="deductBalanceModalVisible = false"\n            >\n                <sw-number-field\n                        v-model:value="amount"\n                        label="Amount"\n                        :min="0.00"\n                        :step="0.00"\n                        :number-type="\'float\'"\n                        placeholder="Enter amount"></sw-number-field>\n                <sw-text-field v-model:value="reason" label="Reason" />\n                <sw-button @click="deductBalance" size="small" variant="primary">\n                    Submit\n                </sw-button>\n                <sw-button\n                        @click="deductBalanceModalVisible = false"\n                        size="small"\n                        variant="danger"\n                >\n                    Cancel\n                </sw-button>\n            </sw-modal>\n            <sw-modal\n                    v-if="confirmDeleteModalVisible"\n                    title="Confirm Delete"\n                    @modal-close="confirmDeleteModalVisible = false"\n            >\n                <p>Are you sure you want to delete this customer\'s store credit and all the history?</p>\n                <br>\n\n                <sw-button\n                        @click="deleteStoreCredit"\n                        size="small"\n                        variant="danger"\n                >\n                    Confirm\n                </sw-button>\n                <sw-button\n                        @click="confirmDeleteModalVisible = false"\n                        size="small"\n                        variant="primary"\n                >\n                    Cancel\n                </sw-button>\n            </sw-modal>\n            <sw-modal\n                    v-if="addCustomerModalVisible"\n                    title="Add Customer Store Credit"\n                    @modal-close="addCustomerModalVisible = false"\n                    size="large"\n            >\n                 <sw-customer-grid v-model:value="selectedNewCustomer"/>\n                 <sw-card title="Amount">\n                <sw-number-field\n                        v-model:value="newCustomerAmount"\n                        :min="0.00"\n                        :step="0.00"\n                        :number-type="\'float\'"\n                        placeholder="Enter amount"\n                />\n                </sw-card>\n                <template #modal-footer>\n                <sw-button @click="addCustomerCredit" size="small" variant="primary">\n                    Submit\n                </sw-button>\n                <sw-button @click="addCustomerModalVisible = false" size="small" variant="danger">\n                    Cancel\n                </sw-button>\n                </template>\n            </sw-modal>\n        </template>\n    </sw-page>\n</template>',inject:["repositoryFactory","httpClient"],mixins:[a.getByName("notification")],data(){return{confirmDeleteModalVisible:!1,addBalanceModalVisible:!1,deductBalanceModalVisible:!1,addCustomerModalVisible:!1,repository:null,storeCredits:[],customers:[],isLoading:!1,amount:0,reason:"",selectedCustomer:null,selectedNewCustomer:null,selectedStoreCredit:null,newCustomerAmount:0,defaultValuePerCredit:1,columns:[{property:"customerFullName",label:"Customer Full Name",allowResize:!0,sortable:!0},{property:"credits",label:"Credits",allowResize:!0},{property:"balance",label:"Balance ($)",allowResize:!0},{property:"actions",label:"Balance Actions",allowResize:!1,align:"center",sortable:!1,width:"300px"}]}},created(){this.repository=this.repositoryFactory.create("store_credit"),this.fetchStoreCredits()},methods:{async fetchStoreCredits(){this.isLoading=!0;let e=new i;e.addAssociation("customer");try{let t=await this.repository.search(e,Shopware.Context.api),r=this.defaultValuePerCredit||1;try{let e=await fetch("/api/_action/system-config?domain=StoreCredit.config",{headers:{Authorization:`Bearer ${Shopware.Context.api.authToken.access}`}});if(e.ok){let t=(await e.json())["StoreCredit.config.defaultValuePerCredit"];t&&parseFloat(t)>0&&(r=parseFloat(t),this.defaultValuePerCredit=r)}}catch(e){console.warn("Could not fetch default value per credit, using 1.0",e)}this.storeCredits=t.map(e=>{let t=e.balance||0,s=e.customer,a=s?.customFields||{},i=a.store_credit_value_per_unit?parseFloat(a.store_credit_value_per_unit):r,n=i>0?i:1;return{id:e.id,customerFullName:`${e.customer.firstName} ${e.customer.lastName}`,credits:t,balance:t*n,customerId:e.customerId,storeCreditId:e.id,valuePerCredit:n}})}catch(e){console.error("Error fetching store credits:",e)}finally{this.isLoading=!1}},formatCurrency(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)},formatCredits(e){return parseFloat(e||0).toFixed(2)},fetchCustomers(){let e=new i;e.addSorting(i.sort("lastName","ASC")),this.repositoryFactory.create("customer").search(e,Shopware.Context.api).then(e=>{this.customers=e.map(e=>({id:e.id,name:`${e.firstName} ${e.lastName}`,valuePerCredit:this.getCustomerValuePerCredit(e)}))}).catch(e=>{console.error("Error fetching customers:",e)})},getCustomerValuePerCredit(e){let t=e?.customFields||{},r=this.defaultValuePerCredit&&this.defaultValuePerCredit>0?this.defaultValuePerCredit:1,s=t.store_credit_value_per_unit?parseFloat(t.store_credit_value_per_unit):r;return(!s||s<=0||Number.isNaN(s))&&(s=1),s},openAddBalanceModal(e){this.selectedCustomer=e,this.amount=0,this.reason="",this.addBalanceModalVisible=!0},openDeductBalanceModal(e){this.selectedCustomer=e,this.amount=0,this.reason="",this.deductBalanceModalVisible=!0},openAddCustomerModal(){this.selectedNewCustomer=null,this.newCustomerAmount=0,this.addCustomerModalVisible=!0,this.fetchCustomers()},addBalance(){let e=parseFloat(this.amount);if(isNaN(e)||e<=0){this.createNotificationError({title:"Error",message:"Credits must be greater than zero."});return}let t=this.selectedCustomer?.valuePerCredit||this.defaultValuePerCredit||1,r={customerId:this.selectedCustomer.customerId,amount:e*t,reason:this.reason||"Admin update"};fetch("/api/store-credit/add",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${Shopware.Context.api.authToken.access}`},body:JSON.stringify(r)}).then(e=>{if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);return e.json()}).then(()=>{this.createNotificationSuccess({title:"Success",message:"Balance added successfully!"}),this.addBalanceModalVisible=!1,this.fetchStoreCredits()}).catch(e=>{console.error("Error adding balance:",e),this.createNotificationError({title:"Error",message:"Failed to add balance."})})},deductBalance(){let e=parseFloat(this.amount);if(isNaN(e)||e<=0){this.createNotificationError({title:"Error",message:"Credits must be greater than zero."});return}let t=this.selectedCustomer?.valuePerCredit||this.defaultValuePerCredit||1,r={customerId:this.selectedCustomer.customerId,amount:e*t,reason:this.reason||"Admin update"};fetch("/api/store-credit/deduct",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${Shopware.Context.api.authToken.access}`},body:JSON.stringify(r)}).then(e=>{if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);return e.json()}).then(()=>{this.createNotificationSuccess({title:"Success",message:"Balance deducted successfully!"}),this.deductBalanceModalVisible=!1,this.fetchStoreCredits()}).catch(e=>{console.error("Error deducting balance:",e),this.createNotificationError({title:"Error",message:"Failed to deduct balance."})})},addCustomerCredit(){let e=parseFloat(this.newCustomerAmount);if(!this.selectedNewCustomer){this.createNotificationError({title:"Error",message:"Please select a customer."});return}if(isNaN(e)||e<=0){this.createNotificationError({title:"Error",message:"Credits must be greater than zero."});return}let t=this.customers.find(e=>e.id===this.selectedNewCustomer),r=t?.valuePerCredit||this.defaultValuePerCredit||1;fetch("/api/store-credit/add",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${Shopware.Context.api.authToken.access}`},body:JSON.stringify({customerId:this.selectedNewCustomer,amount:e*r,reason:"Admin added store credits"})}).then(e=>e.ok?e.json():e.json().then(e=>{throw Error(e.message||"An error occurred")})).then(e=>{if(e.success)this.createNotificationSuccess({title:"Success",message:"Store credit added successfully!"}),this.addCustomerModalVisible=!1,this.fetchStoreCredits();else throw Error(e.message||"An error occurred")}).catch(e=>{console.error("Error adding store credit:",e),this.createNotificationError({title:"Error",message:e.message||"Failed to add store credit."})})},navigateToCustomerHistory(e,t,r){if(!e){this.createNotificationError({title:"Error",message:"Invalid store credit ID."});return}this.$router.push({name:"store.credits.history",params:{id:e},query:{name:t,balance:r}})},openDeleteModal(e){this.selectedStoreCredit={...e},this.confirmDeleteModalVisible=!0},deleteStoreCredit(){if(!this.selectedStoreCredit||!this.selectedStoreCredit.id){this.createNotificationError({title:"Error",message:"Invalid store credit selection."});return}this.repository.delete(this.selectedStoreCredit.id,Shopware.Context.api).then(()=>{this.createNotificationSuccess({title:"Success",message:"Store credit deleted successfully!"}),this.confirmDeleteModalVisible=!1,this.fetchStoreCredits()}).catch(e=>{console.error("Error deleting store credit:",e),this.createNotificationError({title:"Error",message:"Failed to delete store credit."})})}}}),r(594);let{Component:n,Mixin:o}=Shopware,{Criteria:l}=Shopware.Data;n.register("store-credits-history",{template:"<template>\n    <sw-page>\n        <template #content>\n            <div class=\"customer-details\">\n                <sw-button\n                        size=\"small\"\n                        variant=\"secondary\"\n                        @click=\"goBack\"\n                >\n                   Go Back\n                </sw-button>\n                <div class=\"customer-info\">\n                    <h2>{{ customerName }}</h2>\n                    <p>Balance: {{ formatCurrency(customerBalance) }}</p>\n                </div>\n            </div>\n\n            <sw-data-grid\n                    :dataSource=\"history\"\n                    :columns=\"[\n                    { property: 'amount', label: 'Amount', align: 'right' },\n                    { property: 'reason', label: 'Reason' },\n                    { property: 'createdAt', label: 'Date', align: 'center' }\n                ]\"\n                    :isLoading=\"isLoading\"\n            >\n                <template #column-amount=\"{ item }\">\n                    <span\n                            :class=\"{\n                            'text-success': item.actionType === 'add',\n                            'text-danger': item.actionType === 'deduct'\n                        }\"\n                    >\n                        {{ item.actionType === 'add' ? '+' : '-' }}\n                        {{ formatCurrency(item.amount) }}\n                    </span>\n                </template>\n\n                <template #column-createdAt=\"{ item }\">\n                    {{ formatDate(item.createdAt) }}\n                </template>\n            </sw-data-grid>\n        </template>\n    </sw-page>\n</template>\n",inject:["repositoryFactory"],mixins:[o.getByName("notification")],data(){return{history:[],isLoading:!1,customerName:this.$route.query.name||"Unknown",customerBalance:this.$route.query.balance||0}},created(){this.fetchHistory()},methods:{goBack(){this.$router.push({name:"store.credits.index"})},fetchHistory(){this.isLoading=!0;let e=new l;e.addFilter(l.equals("storeCreditId",this.$route.params.id)),e.addSorting(l.sort("createdAt","DESC")),this.repositoryFactory.create("store_credit_history").search(e,Shopware.Context.api).then(e=>{this.history=e}).catch(e=>{console.error(e),this.createNotificationError({title:"Error",message:"Failed to fetch history."})}).finally(()=>{this.isLoading=!1})},formatCurrency(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)},formatDate(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}}}),Shopware.Module.register("store-credits",{type:"plugin",name:"store-credits",title:"Store Credits",description:"Manage customer store credits.",color:"#ffcc00",icon:"default-money-coin",routes:{index:{component:"store-credits-index",path:"index"},history:{component:"store-credits-history",path:"history/:id"}},navigation:[{label:"Store Credits",color:"#ffcc00",path:"store.credits.index",icon:"default-money-coin",position:100,parent:"sw-customer"}]}),Shopware.Component.override("sw-order-line-items-grid-sales-channel",{template:'{% block sw_order_line_items_grid_sales_channel_grid %}\n    {% block sw_alert_message %}\n<br>\n            <sw-alert variant="warning">\n                To apply store credits from the customer balance, add a credit item then use the specific discount name: <strong>Store credit discount</strong>\n            </sw-alert>\n    {% endblock %}\n\n    {% parent %}\n{% endblock %}\n'}),r(165);var d=Shopware;d.Component.override("sw-order-detail-details",{mounted(){this.applyFieldRestrictions()},watch:{"order.customFields.orderTypePayment"(){this.applyFieldRestrictions()}},methods:{applyFieldRestrictions(){this.$nextTick(()=>{let e=this.order?.customFields?.orderTypePayment;this.$el.classList.remove("cc-payment","ach-echeck-payment"),"credit_card"===e?(this.$el.classList.add("cc-payment"),this.disableFields(["sw-order-detail-details__billing-address","sw-order-detail-details__shipping-address"])):"ach_echeck"===e&&(this.$el.classList.add("ach-echeck-payment"),this.disableFields(["sw-order-detail-details__billing-address","sw-order-detail-details__shipping-address","sw-order-detail-details__phone-number"]))})},disableFields(e){e.forEach(e=>{let t=this.$el.querySelector(`.${e}`);t&&t.querySelectorAll("input, textarea, select, button").forEach(e=>e.setAttribute("disabled","disabled"))})}}}),r(457),d.Component.override("sw-order-address-selection",{computed:{addressOptions(){let e=(this.customer?.addresses||[]).map(e=>({label:`${e.street}, ${e.zipcode} ${e.city}, ${e.country?.translated?.name??""}`,...e}));return this.address&&e.unshift({label:this.address?.zipcode?`${this.address.street}, ${this.address.zipcode} ${this.address.city}, ${this.address?.country?.translated?.name??""}`:`${this.address.street}, ${this.address.city}, ${this.address?.country?.translated?.name??""}`,...this.address}),e}}})}()}();